<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <main>
      <h2>Produtos</h2>
      <section
        id="produtos"
        ondragenter="return dragEnter(event)"
        ondrop="return dragDrop(event)"
        ondragover="return dragOver(event)"
      >
        <span id="arraste-produtos"></span>
        <article
          id="article1"
          class="prod rounded"
          draggable="true"
          ondragstart="return dragStart(event)"
        >
          <div>
            <img class="rounded" src="https://picsum.photos/64/64?grayscale" />
          </div>
          <div>
            <h1>Produto 1</h1>
            <p>Descrição</p>
          </div>
          <div class="valores">
            <input
              class="rounded"
              type="number"
              name="qtde"
              min="1"
              value="1"
            />
            <input
              class="rounded"
              type="text"
              name="valor"
              value="2.50"
              disabled
            />
          </div>
        </article>

        <article
          id="article2"
          class="prod rounded"
          draggable="true"
          ondragstart="return dragStart(event)"
        >
          <div>
            <img class="rounded" src="https://picsum.photos/64/64?grayscale" />
          </div>
          <div>
            <h1>Produto 2</h1>
            <p>Descrição</p>
          </div>
          <div class="valores">
            <input
              class="rounded"
              type="number"
              name="qtde"
              min="1"
              value="1"
            />
            <input
              class="rounded"
              type="text"
              name="valor"
              value="2.50"
              disabled
            />
          </div>
        </article>
      </section>
      <h2>Carrinho</h2>
      <section id="checkout">
        <section
          id="carrinho"
          ondragenter="return dragEnter(event)"
          ondrop="return dragDrop(event)"
          ondragover="return dragOver(event)"
        >
          <span id="arraste-carrinho"></span>
        </section>
        <section id="carrinho-valores">
          <table>
            <tbody>
              <tr>
                <th>Total itens</th>
                <td id="total-itens">0</td>
              </tr>
              <tr>
                <th>Total</th>
                <td id="valor-total">0</td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
    </main>
    <script src="./js/app.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript">
      $("input[name='qtde']").change(function () {
        updateValues();
      });

      function updateValues() {
        var total = 0;
        var quant_total = 0;

        // Loops through all the items and increase the total price to show on screen
        $("#carrinho")
          .find("article")
          .each(function (index) {
            var quantity =$( this ).find("input[name='qtde']").val();
			      var individual_price=$( this ).find("input[name='valor']").val();
            var sub_total = quantity * individual_price;
            quant_total = quant_total + parseInt(quantity);
            total = total + sub_total;
          });

        $("#valor-total").html(total);
        $("#total-itens").html(quant_total);
      }
    </script>
  </body>
</html>
